<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
        <meta name="keywords" content="关键词">
        <meta name="description" content="描述">
        <meta name="author" content="Danew">
        <style>
            body{font-family: "Microsoft YaHei",serif;}
            body,dl,dd,p,h1,h2,h3,h4,h5,h6{margin:0;}
            ol,ul,li{margin:0;padding:0;list-style:none;}
            img{border:none;}

            body{
                user-select: none;
            }
            table{
                width:1000px;
                margin:50px auto 20px;
                border-color:#930;
                border-collapse:collapse;
                text-align:center;
            }
            table tr td{
                width:25%;
                height:100px;
            }
            table .title td{
                height:50px;
                background-color:#c36;
                color:white;
                font-size:14px;
                font-weight:bolder;
            }
            table tr td img{
                height:70px;
            }
            table tr td.number{
                font-size:0;
                line-height:100px;
            }
            .number span{
                display:inline-block;
                border:1px solid #ddd;
                font-size:14px;
            }
            .number .sub,.number .add{
                width:30px;
                height:30px;
                background-color:#ddd;
                line-height:30px;
                font-weight:bolder;
                text-align:center;
                cursor:pointer;
            }
            .number .num{
                width:50px;
                height:30px;
                line-height:30px;
                color:#c36;
                font-size:12px;
            }
            .footer{
                position: relative;
                width:1000px;
                height:50px;
                margin:auto;
                background-color:#c36;
                line-height:50px;
            }
            .footer p{
                position: absolute;
                color:white;
                font-size:14px;
                font-weight:bolder;
            }
            .footer .selected{
                left:500px;
            }
            .footer .sum{
                left:750px;
            }
            .footer p span{
                color:#f4e5a9;
            }
        </style>
    </head>
    <body>
        <table border="1">
            <tr class="title">
                <td>商品</td>
                <td>单价</td>
                <td>数量</td>
                <td>小计</td>
            </tr>
            <tr>
                <td>
                    <img src="img/shop1.jpg" alt="">
                </td>
                <td class="danjia">8</td>
                <td class="number">
                    <span class="sub">-</span>
                    <span class="num">0</span>
                    <span class="add">+</span>
                </td>
                <td class="price">0</td>
            </tr>
            <tr>
                <td>
                    <img src="img/shop2.jpg" alt="">
                </td>
                <td class="danjia">10</td>
                <td class="number">
                    <span class="sub">-</span>
                    <span class="num">0</span>
                    <span class="add">+</span>
                </td>
                <td class="price">0</td>
            </tr>
            <tr>
                <td>
                    <img src="img/shop3.jpg" alt="">
                </td>
                <td class="danjia">12.5</td>
                <td class="number">
                    <span class="sub">-</span>
                    <span class="num">0</span>
                    <span class="add">+</span>
                </td>
                <td class="price">0</td>
            </tr>
            <tr>
                <td>
                    <img src="img/shop4.jpg" alt="">
                </td>
                <td class="danjia">23</td>
                <td class="number">
                    <span class="sub">-</span>
                    <span class="num">0</span>
                    <span class="add">+</span>
                </td>
                <td class="price">0</td>
            </tr>
        </table>
        <div class="footer">
            <p class="selected">已选中商品： <span>0</span> 个</p>
            <p class="sum">合计费用： <span>0</span> ￥</p>
        </div>
        
        <script>

            (function () {
                //模拟一个存储各种关键值的数据，而不是每次通过innerHTML获取
                let data = [
                    {
                        id:0,
                        danjia:8,
                        num:0
                    },
                    {
                        id:1,
                        danjia:10,
                        num:0
                    },
                    {
                        id:2,
                        danjia:12.5,
                        num:0
                    },
                    {
                        id:3,
                        danjia:23,
                        num:0
                    }
                ]


                let aDan = document.querySelectorAll("table .danjia"),
                    aSub = document.querySelectorAll("table .number .sub"),
                    aAdd = document.querySelectorAll("table .number .add"),
                    aNum = document.querySelectorAll("table .number .num"),
                    aPrice = document.querySelectorAll("table .price"),
                    oSelected = document.querySelector(".footer .selected span"),
                    oSum = document.querySelector(".footer .sum span"),
                    len = aDan.length;

                //显示代码
                function change(i) {
                    //数量更新
                    aNum[i].innerHTML=data[i].num;
                    //总价更新
                    aPrice[i].innerHTML = data[i].num*data[i].danjia;

                    //oSelected.innerHTML --;
                    oSelected.innerHTML = (function () {
                        let sum=0;
                        for(let i=0;i<len;i++){
                            sum += data[i].num;
                        }
                        return sum;
                    })();

                    oSum.innerHTML =(function () {
                        let sum=0;
                        for(let i=0;i<len;i++){
                            sum += data[i].num*data[i].danjia;
                        }
                        return sum;
                    })();
                }



                //循环添加点击事件
                for(let i=0;i<len;i++){
                    //减法计算
                    aSub[i].onclick = function () {
                        //点击计算
                        if(data[i].num == 0) return;  //不能小于0
                        //数量变化
                        data[i].num--;
                        change(i);
                    }
                    //加法计算
                    aAdd[i].onclick = function () {
                        //点击计算
                        data[i].num ++;
                        change(i);
                    }
                }
            })();

        </script>
    </body>
</html>














